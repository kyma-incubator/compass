apiVersion: v1
kind: Service
metadata:
    name: {{ template "fullname" . }}
    namespace: {{ .Release.Namespace }}
    labels:
        app: {{ .Chart.Name }}
        release: {{ .Release.Name }}
spec:
    type: ClusterIP
    ports:
    - port: {{ .Values.service.port }}
      targetPort: {{ .Values.deployment.port }}
      protocol: TCP
      name: http
    - port: {{ .Values.global.externalServicesMock.certSecuredPort }}
      targetPort: {{ .Values.global.externalServicesMock.certSecuredPort }}
      protocol: TCP
      name: http-mtls
    selector:
        app: {{ .Chart.Name }}
        release: {{ .Release.Name }}
